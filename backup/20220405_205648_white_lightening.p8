pico-8 cartridge // http://www.pico-8.com
version 35
__lua__
--game loop 

function _init() 
	map_setup() 
	make_player()
end

function _update()
	move_player()
end

function _draw()
	cls() 
	draw_map()
	draw_player()
end

-->8
--map code 

function map_setup() 
-- tile settings 
 wall=0 
 key=1 
 door=2 
 anim1=3
 anim2=4 
 lose=6 
 win=7 
--sprite flags^
end

function draw_map()
	mapx=flr(p.x/16)*16
	mapy=flr(p.y/16)*16
	camera(mapx*8,mapy*8)
	-- with flr we are getting
	--a const cordinate 
	--0x0 16x0 32x0
	
	map(0,0,0,0,128,64)
	
end

function is_tile(tile_type,x,y)
	tile = mget(x,y)
	has_flag=fget(tile,tile_type) 
	return has_flag
end

function can_move(x,y) 
	return not is_tile(wall,x,y)
	--here we are asking
	--is this a wall? 
	-- so with not we are inversing
	-- true so now is tile is false.
	-- so now if there is a wall.then
	-- true means there is a wall
end

function swap_tile(x,y) 
	tile=mget(x,y) 
	mset(x,y,tile+1)
	--asks what tile is at x,y
	-- then replaces it with 
	-- that tile + 1
	-- remember to replace 
	-- with like white lightening 
	-- or something
	
end

function get_key(x,y)
	p.keys+=1 
	swap_tile(x,y) 
	
end

function open_door(x,y)
	p.keys-=1 
	swap_tile(x,y)
	

end
-->8
--player code
function make_player() 
	p={} 
	
	p.x=3
	p.y=2 
	
	p.sprint=4
	p.keys=0 
	
end

function draw_player()
	spr(p.sprint,p.x*8,p.y*8) 
	
end

function move_player() 
	newx=p.x 
	newy=p.y
 if(btnp(⬅️)) newx-=1
 --shift l
 if(btnp(➡️)) newx+=1 
 --shift r
 if(btnp(⬆️)) newy-=1 
 -- shift u
 if(btnp(⬇️)) newy+=1
	--shift d
	
	--letting using key
	interact(newx,newy)
	
	if(can_move(newx,newy)) then
		p.x=mid(0,newx,127) 
		p.y=mid(0,newy,63)
		--sets our bounds so we cant
		-- move off the map.
	end

end 

function interact(x,y) 
	if (is_tile(key,x,y)) then 
	 get_key(x,y)
	elseif (is_tile(door,x,y) and p.keys>0) then open_door(x,y)
	end
	
end
__gfx__
00000000000000001110111111181111008888205555555555555555655510660000000000000000000000000000000000000000000000000000000000000000
00000000011101111110111111858111008888885555555555555555511110650000000000000000000000000000000000000000000000000000000000000000
0070070000000000111011111888881100f0f0f05554455555500555111110510000000000000000000000000000000000000000000000000000000000000000
0007700011101110111011111855581100fffff05444445550000055000000000000000000000000000000000000000000000000000000000000000000000000
000770000000000011101111188888110f99999f5004445550000055110666550000000000000000000000000000000000000000000000000000000000000000
007007000111011100000000188888110f99999f54444a5550000055110655510000000000000000000000000000000000000000000000000000000000000000
0000000000000000110110111888881100ccccc05004445550000055110511110000000000000000000000000000000000000000000000000000000000000000
0000000011011101110110111888881100c000c05444445550000055111111110000000000000000000000000000000000000000000000000000000000000000
11111111111111111110111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
11111111111111111110111100000000000000001106601101110111000000000000000000000000000000000000000000000000000000000000000000000000
11111111111111111110111100000000000000000066060000000000000000000000000000000000000000000000000000000000000000000000000000000000
1111111111111111111011110044440400444404117cc81011101110000000000000000000000000000000000000000000000000000000000000000000000000
1111111111111111111011115448400454484004007cc70000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000001111111111101111444444444444444401c87c1100110111000000000000000000000000000000000000000000000000000000000000000000000000
11011011111111111110111100444440004444400087770000000000000000000000000000000000000000000000000000000000000000000000000000000000
11011011111111111110111100404040004040401166660111011101000000000000000000000000000000000000000000000000000000000000000000000000
11111011000000000000000011111111000000004a4444a4a4aa4a44000000000000000000000000000000000000000000000000000000000000000000000000
11111011110110111101101111111111000000004a4444a451991511000000000000000000000000000000000000000000000000000000000000000000000000
11111000110110111101101111111111000000004a4444a411111111000000000000000000000000000000000000000000000000000000000000000000000000
11111011000000000000000011111111000000004a4444a411111111000000000000000000000000000000000000000000000000000000000000000000000000
1111101111111111111011111111111100000000aaa99aaa51111511000000000000000000000000000000000000000000000000000000000000000000000000
111110001111111111101111111111110000000049499494a4444a44000000000000000000000000000000000000000000000000000000000000000000000000
11111011111111111110111111111111000000004a4444a4a4444a44000000000000000000000000000000000000000000000000000000000000000000000000
11111011111111111110111111111111000000004a4444a4a4444a44000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000001101111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
11011011110110111101111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
11011011110110110001111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000001101111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
11111011110111111101111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
11111011110111110001111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
11111000000111111101111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
11111011110111111101111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
10101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010
10000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__gff__
0000000100050001000000000000000000000000000200000000000000000000000000000003010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
1111121111121311121111121111121101010101010101071111111111111111010101010101010101010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1111122311121111131311121111121101010101111111071111111111111101010101010101010101010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010021010021010021010021010021001010311111111070711111111111101010101150101010101010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010101010101010113010101010102111111111111110711111111010101010101010101010101010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010115010101010101010102010101011111111111110711111101010101010101010101010101010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101030101010101012501010101010101111111111111110711111101070707070707010101010101010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010101010101130101013211111111111111111111110707070707070101010107070101010101010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010101010101010101013211111111111111111111111111111101010201010101070101010101010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0701010101010101070101013211111111111111111111111101010101010101010101070707070701010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0107070707070707010101013211111111111101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0107010101010107111111111111111111111101010101010101020101010101010101010101010101010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0107010101010107111111111111111111111101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0107010101010107111111112323232311111101010301010101010101010101070707070701010101010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0107070101010101111111111111112311111101010101010101010101010707070101010701010101010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010107070701010111111111112311111111110211111107070707070701010101010701010101070707010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010101010707010111111111232311111111111111110701010101010101010101070701010101070107010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010101010101011111111111111111111111111111071101010101010101010107070101010107070101070101010101010101010101070707070101070701000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0107070701010111111111111111111111111111111107071101010101010101010107010101010707010101070101010101010101010101070101070707070701000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0107010107070707070711111111111111111111111111111101010101010101010107010101010101010107070101010101010101010101070101010107070101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0107010101010101010711111111111111111111111111111101010101010101010107010101150101010707010101010101010101010101070101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0107070115010101010707111111111111111111111111111101010101010101010107010101010101010701010101010101010101010107070101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101070101010101010107071111111111111111111111111101010101010101010107070101010101010701010101010101010101010107010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101070701010101011616071111111111111111111111111101010101010101010101070701010101010707010101010101010101010707010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010701010101010101070101010101010101010101010101110101010101010101010107070707070707010101010101010101010701010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0107070701010101010107070101010101010101010101010101111101010101010101010101010101010107070701010101010107070101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0707010101010101010107010101010101010101010101010101011111010101010101010101010101010101010707010101010707010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0701010101010107050701010101010101010101010101010101010111010101010101010101010101010101010107010101070701010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0701010101010701010101010101010101010101010101010101010101010101010101010101010101010101010107070707010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0707010101010701010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0107070701010707010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010707070707010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
000400000706003050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
